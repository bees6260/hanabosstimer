<!DOCTYPE html><html><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>哈娜RO Boss計時器</title>    <style>        body {            font-family: Arial, sans-serif;            margin: 0;            padding: 20px;            background-color: #f0f0f0;        }        #eventLog {            position: fixed;            top: 0;            left: 0;            right: 0;            background: #333;            color: white;            padding: 10px;            margin: 0;            z-index: 100;            /* 移除最大高度限制 */        }        .log-item {            display: flex;            justify-content: space-between;            align-items: center;            margin: 5px 0;            padding: 5px;            border-radius: 4px;            background: rgba(255, 255, 255, 0.1);        }        .log-content {            flex-grow: 1;            font-size: 14px; /* 稍微縮小字體 */            line-height: 1.2; /* 減少行高 */        }        .log-actions {            display: flex;            gap: 5px;        }        .log-actions button {            padding: 2px 8px;            font-size: 12px;            background: #666;        }        .log-actions button:hover {            background: #777;        }        #eventLogActions {            display: flex;            justify-content: flex-end;            gap: 10px;            padding: 5px;            border-bottom: 1px solid #555;            margin-bottom: 5px; /* 減少底部間距 */        }        #eventLogActions button {            background: #666;            font-size: 14px;        }        .cancel-btn {            background: #ff4444 !important;        }        .cancel-btn:hover {            background: #ff6666 !important;        }        .search-container {            position: fixed;            /* 根據事件列表內容動態調整頂部位置 */            top: var(--event-log-height, 160px);            left: 0;            right: 0;            background: #fff;            padding: 10px;            z-index: 99;            box-shadow: 0 2px 4px rgba(0,0,0,0.1);        }        #searchInput {            width: calc(100% - 20px);            padding: 10px;            margin: 0 auto;            display: block;            border: 1px solid #ddd;            border-radius: 4px;            font-size: 16px;        }        .category-title {            width: 100%;            padding: 10px;            background: #333;            color: white;            margin: 10px 0; /* 減少上下間距 */            border-radius: 4px;        }        .timer {            color: #ff4444;            font-weight: bold;        }        .container {            display: flex;            flex-wrap: wrap;            gap: 20px;            justify-content: center;            margin-top: calc(var(--event-log-height, 160px) + 60px);        }        .cards-container {            display: flex;            flex-wrap: wrap;            gap: 20px;            justify-content: center;            margin-top: 10px; /* 與標題的距離縮短 */        }        .card {            background: white;            border-radius: 8px;            padding: 15px;            width: 250px;            box-shadow: 0 2px 4px rgba(0,0,0,0.1);        }        .card.hidden {            display: none;        }        .card h3 {            margin: 10px 0;            font-size: 16px;        }        .controls {            margin-top: 10px;            display: flex;            gap: 10px;            flex-direction: column;        }        button {            background: #4CAF50;            color: white;            border: none;            padding: 8px 15px;            border-radius: 4px;            cursor: pointer;        }        button:hover {            background: #45a049;        }        input[type="datetime-local"] {            padding: 8px;            border: 1px solid #ddd;            border-radius: 4px;            width: 100%;        }        .mvp-section, .poring-section {            width: 100%;        }        .input-time-dialog {            display: none;            position: fixed;            top: 50%;            left: 50%;            transform: translate(-50%, -50%);            background: white;            padding: 20px;            border-radius: 8px;            box-shadow: 0 2px 10px rgba(0,0,0,0.3);            z-index: 1000;        }        .dialog-buttons {            display: flex;            gap: 10px;            justify-content: flex-end;            margin-top: 15px;        }        .overlay {            display: none;            position: fixed;            top: 0;            left: 0;            right: 0;            bottom: 0;            background: rgba(0,0,0,0.5);            z-index: 999;        }    .page-title {        text-align: center;        position: fixed;        top: calc(var(--event-log-height, 160px) + 60px);        left: 0;        right: 0;        z-index: 98;    }    .page-title h1 {        margin: 0;        padding: 10px;        color: #333;        font-size: 24px;    }    /* 調整 container 的 margin-top */    .container {        margin-top: calc(var(--event-log-height, 160px) + 100px);    }    </style></head><body>    <div id="eventLog">        <div id="eventLogActions">            <button onclick="copyAllEvents()">複製所有事件</button>        </div>        <div id="eventLogContent"></div>    </div>        <div class="search-container">        <input type="text" id="searchInput" placeholder="搜尋Boss...">    </div>    <div class="page-title">        <h1>哈娜RO Boss計時器</h1>    </div>    <div class="overlay" id="overlay"></div>    <div class="input-time-dialog" id="timeDialog">        <h3 id="dialogBossName"></h3>        <input type="datetime-local" id="dialogTimeInput">        <div class="dialog-buttons">            <button onclick="closeTimeDialog()">取消</button>            <button onclick="confirmCustomTime()">確認</button>        </div>    </div>    <div class="container">        <div class="mvp-section">            <div class="category-title">MVP</div>            <div class="cards-container">                <!-- MVP卡片將在這裡生成 -->            </div>        </div>        <div class="poring-section">            <div class="category-title">波利家族</div>            <div class="cards-container">                <!-- 波利家族卡片將在這裡生成 -->            </div>        </div>    </div>    <script>const bosses = [    { category: "MVP", name: "1039 巴風特", respawnTime: 3600000 },    { category: "MVP", name: "1046 死靈(吉分)", respawnTime: 3600000 },    { category: "MVP", name: "1046 死靈(地下)", respawnTime: 3600000 },    { category: "MVP", name: "1059 蜂后", respawnTime: 3600000 },    { category: "MVP", name: "1086 黃金蟲", respawnTime: 3600000 },    { category: "MVP", name: "1087 獸人英雄1", respawnTime: 3600000 },    { category: "MVP", name: "1087 獸人英雄2", respawnTime: 3600000 },    { category: "MVP", name: "1112 海盜之王", respawnTime: 3600000 },    { category: "MVP", name: "1115 虎王", respawnTime: 3600000 },    { category: "MVP", name: "1147 蟻后", respawnTime: 3600000 },    { category: "MVP", name: "1150 月夜貓", respawnTime: 3600000 },    { category: "MVP", name: "1157 法老王", respawnTime: 3600000 },    { category: "MVP", name: "1159 皮里恩", respawnTime: 3600000 },    { category: "MVP", name: "1181 殭屍龍", respawnTime: 3600000 },    { category: "MVP", name: "1190 獸人酋長", respawnTime: 3600000 },    { category: "MVP", name: "1251 冰暴騎士", respawnTime: 3600000 },    { category: "MVP", name: "1252 卡崙", respawnTime: 3600000 },    { category: "MVP", name: "1272 黑暗之王(古墓)", respawnTime: 3600000 },    { category: "MVP", name: "1272 黑暗之王(地下)", respawnTime: 3600000 },    { category: "MVP", name: "1289 狂暴蟻后", respawnTime: 3600000 },    { category: "MVP", name: "1312 烏龜將軍", respawnTime: 3600000 },    { category: "MVP", name: "1373 死靈騎士", respawnTime: 3600000 },    { category: "MVP", name: "1389 德古拉男爵", respawnTime: 3600000 },    { category: "MVP", name: "1418 墨蛇君", respawnTime: 3600000 },    { category: "MVP", name: "1492 元靈武士", respawnTime: 3600000 },    { category: "MVP", name: "1511 古埃及王", respawnTime: 3600000 },    { category: "MVP", name: "1518 白素貞", respawnTime: 3600000 },    { category: "MVP", name: "1583 塔奧群卡", respawnTime: 3600000 },    { category: "MVP", name: "1623 RSX-0806", respawnTime: 3600000 },    { category: "MVP", name: "1685 貝思波", respawnTime: 3600000 },    { category: "MVP", name: "1688 嗒妮小姐", respawnTime: 3600000 },    { category: "MVP", name: "1708 魔劍士達納托斯的記憶", respawnTime: 3600000 },    { category: "MVP", name: "1719 迪塔勒泰晤勒斯", respawnTime: 3600000 },    { category: "MVP", name: "1734 齊爾-D-01", respawnTime: 3600000 },    { category: "MVP", name: "1768 幽暗夢魘", respawnTime: 3600000 },    { category: "MVP", name: "1871 墮落大神官悉潘", respawnTime: 3600000 },    { category: "MVP", name: "1873 貝雷傑", respawnTime: 3600000 },    { category: "MVP", name: "1874 詛咒蠅王", respawnTime: 3600000 },    { category: "波利家族", name: "1096 天波(朱原3)", respawnTime: 3600000 },    { category: "波利家族", name: "1096 天波(斐原4)", respawnTime: 3600000 },    { category: "波利家族", name: "1120 幽波(沉船2)", respawnTime: 3600000 },    { category: "波利家族", name: "1120 幽波(迷藏3)", respawnTime: 3600000 },    { category: "波利家族", name: "1120 幽波(斐原4)", respawnTime: 3600000 },    { category: "波利家族", name: "1120 幽波(公會4)", respawnTime: 3600000 },    { category: "波利家族", name: "1388 聖天波(朱原5)", respawnTime: 3600000 },    { category: "波利家族", name: "1582 惡波(斐原4)", respawnTime: 3600000 },    { category: "波利家族", name: "1582 惡波(朱原3)", respawnTime: 3600000 }];        let bossTimers = [];        let currentBossIndex = null;        // 生成卡片        function generateCards() {            const mvpContainer = document.querySelector('.mvp-section .cards-container');            const poringContainer = document.querySelector('.poring-section .cards-container');                        bosses.forEach((boss, index) => {                const card = document.createElement('div');                card.className = 'card';                card.innerHTML = `                    <h3>${boss.name}</h3>                    <div class="controls">                        <button onclick="recordKill(${index})">記錄擊殺</button>                        <button onclick="openTimeDialog(${index})">手動輸入時間</button>                    </div>                `;                                if (boss.category === "MVP") {                    mvpContainer.appendChild(card);                } else {                    poringContainer.appendChild(card);                }            });        }        // 搜尋功能        document.getElementById('searchInput').addEventListener('input', function(e) {            const searchText = e.target.value.toLowerCase();            const cards = document.getElementsByClassName('card');                        Array.from(cards).forEach(card => {                const bossName = card.querySelector('h3').textContent.toLowerCase();                if (bossName.includes(searchText)) {                    card.classList.remove('hidden');                } else {                    card.classList.add('hidden');                }            });        });        // 手動輸入時間相關函數        function openTimeDialog(bossIndex) {            currentBossIndex = bossIndex;            const dialog = document.getElementById('timeDialog');            const overlay = document.getElementById('overlay');            const dialogBossName = document.getElementById('dialogBossName');            const dialogTimeInput = document.getElementById('dialogTimeInput');                        dialogBossName.textContent = bosses[bossIndex].name;                        // 設定默認時間為當前時間            const now = new Date();            const timeString = now.toISOString().slice(0, 16);            dialogTimeInput.value = timeString;                        dialog.style.display = 'block';            overlay.style.display = 'block';        }        function closeTimeDialog() {            const dialog = document.getElementById('timeDialog');            const overlay = document.getElementById('overlay');            dialog.style.display = 'none';            overlay.style.display = 'none';            currentBossIndex = null;        }        function confirmCustomTime() {            const timeInput = document.getElementById('dialogTimeInput');            const customDate = new Date(timeInput.value);            if (currentBossIndex !== null) {                updateBossTimer(currentBossIndex, customDate);            }            closeTimeDialog();        }        function recordKill(bossIndex) {            const now = new Date();            updateBossTimer(bossIndex, now);        }        function updateBossTimer(bossIndex, killTime) {            const boss = bosses[bossIndex];            const respawnTime = new Date(killTime.getTime() + boss.respawnTime);                        if (bossTimers[bossIndex]) {                clearInterval(bossTimers[bossIndex]);            }            addToEventLog(boss.name, killTime, respawnTime);            bossTimers[bossIndex] = setInterval(() => {                const now = new Date();                const timeLeft = respawnTime - now;                if (timeLeft <= 0) {                    clearInterval(bossTimers[bossIndex]);                    updateEventLogTimer(boss.name, "已重生!");                } else {                    const hours = Math.floor(timeLeft / (60 * 60 * 1000));                    const minutes = Math.floor((timeLeft % (60 * 60 * 1000)) / (60 * 1000));                    const seconds = Math.floor((timeLeft % (60 * 1000)) / 1000);                    updateEventLogTimer(boss.name,                         `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`                    );                }            }, 1000);        }        function addToEventLog(bossName, killTime, respawnTime) {            const logDiv = document.getElementById('eventLogContent');            const logId = `log-${bossName.replace(/[^a-zA-Z0-9]/g, '')}`;            const logItem = document.createElement('div');            logItem.id = logId;            logItem.className = 'log-item';            logItem.innerHTML = `                <div class="log-content">                    ${bossName} -                     擊殺: ${killTime.toLocaleString()} |                     重生: ${respawnTime.toLocaleString()} |                     倒數: <span class="timer">計算中...</span>                </div>                <div class="log-actions">                    <button class="cancel-btn" onclick="cancelEvent('${logId}', ${bosses.findIndex(b => b.name === bossName)})">取消</button>                </div>            `;                        const existingLog = document.getElementById(logId);            if (existingLog) {                existingLog.innerHTML = logItem.innerHTML;            } else {                logDiv.appendChild(logItem);            }        }        function cancelEvent(logId, bossIndex) {            const logItem = document.getElementById(logId);            if (logItem) {                logItem.remove();                if (bossTimers[bossIndex]) {                    clearInterval(bossTimers[bossIndex]);                    bossTimers[bossIndex] = null;                }            }        }function copyAllEvents() {    const logContent = document.getElementById('eventLogContent');    let textToCopy = '';    const logItems = logContent.getElementsByClassName('log-item');        for (const item of logItems) {        const content = item.querySelector('.log-content').textContent;        // 分析內容字串        const parts = content.split('|');        if (parts.length >= 2) {            // 提取boss名稱（去除" - 擊殺: "部分）            const bossName = parts[0].split(' - ')[0].trim();            // 提取重生時間            const respawnTime = parts[1].replace('重生:', '').trim();            textToCopy += `${bossName} - ${respawnTime}\n`;        }    }    if (textToCopy) {        navigator.clipboard.writeText(textToCopy).then(() => {            alert('已複製所有事件到剪貼簿');        }).catch(err => {            console.error('複製失敗:', err);            // 備用複製方法            const textarea = document.createElement('textarea');            textarea.value = textToCopy;            document.body.appendChild(textarea);            textarea.select();            document.execCommand('copy');            document.body.removeChild(textarea);            alert('已複製所有事件到剪貼簿');        });    } else {        alert('沒有可複製的事件');    }}        function updateEventLogTimer(bossName, timeString) {            const logId = `log-${bossName.replace(/[^a-zA-Z0-9]/g, '')}`;            const logItem = document.getElementById(logId);            if (logItem) {                const timerSpan = logItem.querySelector('.timer');                if (timerSpan) {                    timerSpan.textContent = timeString;                }            }        }       // 添加一個新的函數來更新事件列表高度        function updateEventLogHeight() {            const eventLog = document.getElementById('eventLog');            const height = eventLog.offsetHeight;            document.documentElement.style.setProperty('--event-log-height', `${height}px`);        }        // 修改 addToEventLog 函數，在添加新事件後更新高度        const originalAddToEventLog = addToEventLog;        addToEventLog = function(bossName, killTime, respawnTime) {            originalAddToEventLog(bossName, killTime, respawnTime);            updateEventLogHeight();        };function toggleNewEventForm() {    const newEventSection = document.getElementById('newEventSection');    const toggleButton = document.getElementById('toggleNewEventButton');    const eventNameInput = document.getElementById('eventName');    const eventForm = document.getElementById('eventForm');    if (newEventSection.style.height === '0px' || newEventSection.style.height === '') {        newEventSection.style.height = '160px';        toggleButton.textContent = '取消';        eventNameInput.focus();    } else {        newEventSection.style.height = '0px';        toggleButton.textContent = '新事件';        // 重置表單        eventForm.reset();    }}        // 在頁面加載時初始化        window.onload = function() {            generateCards();            updateEventLogHeight();        };    </script></body></html>